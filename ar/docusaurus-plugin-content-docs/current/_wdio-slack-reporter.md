---
id: wdio-slack-reporter
title: ูุฑุงุณู Slack Reporter
custom_edit_url: https://github.com/morooLee/wdio-slack-reporter/edit/master/README.md
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

> wdio-slack-reporter ูู ุญุฒูุฉ ุชุงุจุนุฉ ูุฌูุฉ ุฎุงุฑุฌูุฉุ ููุฒูุฏ ูู ุงููุนูููุงุช ูุฑุฌู ุงูุงุทูุงุน ุนูู [GitHub](https://github.com/morooLee/wdio-slack-reporter) | [npm](https://www.npmjs.com/package/@moroo/wdio-slack-reporter)

![version](https://img.shields.io/npm/v/@moroo/wdio-slack-reporter?color=%23CB3837&label=latest)
![downloads](https://img.shields.io/npm/dw/@moroo/wdio-slack-reporter?color=%23CB3837&)
![license](https://img.shields.io/npm/l/@moroo/wdio-slack-reporter)
![webdriverio](https://img.shields.io/static/v1?color=EA5906&label=WebdriverIO&message=>=8.0&logo=webdriverio)

ูุฑุงุณู ูู [WebdriverIO](https://webdriver.io/) ุจุงุณุชุฎุฏุงู [Incoming webhook](https://api.slack.com/incoming-webhooks) ู [Web API](https://api.slack.com/web) ูุฅุฑุณุงู ุงููุชุงุฆุฌ ุฅูู [Slack](https://slack.com/).

## ๐ข ุฅุดุนุงุฑ ูุงู

### ุงูุชุฑุญูู ุฅูู [filesUploadV2](https://tools.slack.dev/node-slack-sdk/web-api/#upload-a-file) ุจุณุจุจ [files.upload deprecation](https://api.slack.com/changelog/2024-04-a-better-way-to-upload-files-is-here-to-stay)

## ููุทุฉ ุดุงุดุฉ ุฅุดุนุงุฑ Slack

<img src="https://raw.githubusercontent.com/morooLee/wdio-slack-reporter/master/docs/Notification.png" width="80%" height="80%" title="Notification Image" alt="Notification"></img>

## ุณูุงุณุฉ ุฏุนู ุฅุตุฏุงุฑ WebdriverIO

> ุฅุตุฏุงุฑุงุช WebdriverIO ุงููุฏุนููุฉ ูู ูุฐุง ุงููุดุฑูุน ุชุชุจุน ุณูุงุณุฉ ุฏุนู WebdriverIO.
> ูููู ุงูุชุญูู ูู ุณูุงุณุฉ ุฏุนู WebdriverIO [ููุง](https://webdriver.io/versions).

## ุงูุชุซุจูุช

ุงูุทุฑููุฉ ุงูุฃุณูู ูู ุงูุงุญุชูุงุธ ุจู `@moroo/wdio-slack-reporter` ูุชุจุนูุฉ ุชุทููุฑ ูู ููู `package.json` ุงูุฎุงุต ุจู.

```json
{
  "devDependencies": {
    "@moroo/wdio-slack-reporter": "^9.0.0"
  }
}
```

ููููู ุงูููุงู ุจุฐูู ุจุจุณุงุทุฉ ุนู ุทุฑูู:

- NPM

```bash
npm install @moroo/wdio-slack-reporter --save-dev
```

- Yarn

```bash
yarn add -D @moroo/wdio-slack-reporter
```

ูููู ุงูุนุซูุฑ ุนูู ุชุนูููุงุช ููููุฉ ุชุซุจูุช `WebdriverIO` [ููุง](https://webdriver.io/docs/gettingstarted.html).

## ุงูุชูููู

ูุงุณุชุฎุฏุงู ุงููุฑุงุณูุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ slack ุฅูู ูุตูููุฉ ุงููุฑุงุณููู ูู wdio.conf.js

```js
// wdio.conf.js
import SlackReporter from '@moroo/wdio-slack-reporter';

export const config: WebdriverIO.Config = {
  reporters: [
    [
      SlackReporter,
      {
        slackOptions: {
          type: 'web-api',
          channel: process.env.SLACK_CHANNEL || 'Cxxxxxxxxxx',
          token: process.env.SLACK_BOT_TOKEN || 'xoxb-xxxxxxxxxx-xxxxxx...',
        },
      },
    ],
  ],
};
```

## ุฎูุงุฑุงุช ุงูุชูููู

ูุชู ุฏุนู ุฎูุงุฑุงุช ุงูุชูููู ุงูุชุงููุฉ.
ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุชุ ูุฌุจ ุนููู ุชุนููู `webhook` ุฃู `web-api`.
ุฅุฐุง ุชู ุชุนููู ูู ูู `web-api` ู `webhook`ุ ูุชู ุงุณุชุฎุฏุงู `web-api`.

### Webhook (Incoming Webhook)

#### **webhook (`ูุทููุจ`)**

[**Incoming Webhook**](https://api.slack.com/incoming-webhooks) ูููุงุฉ slack ุงูุชู ูุฌุจ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุฅูููุง. ุฅุฐุง ูู ูุชู ุชูููู ุนููุงู URLุ ูู ูุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช.

- ุงููุทุงู: `webhook`
- ุงูููุน: `string`

#### **username (`ุงุฎุชูุงุฑู`)**

ุณุชุธูุฑ ูููุฉ ุงุณู ุงููุณุชุฎุฏู ูู ุฅุดุนุงุฑ slack ููุณุชุฎุฏู ุฃุฑุณูู.

- ุงููุทุงู: `webhook`
- ุงูููุน: `string`
- ุงูุงูุชุฑุงุถู: `"WebdriverIO Reporter"`

#### **icon_url (`ุงุฎุชูุงุฑู`)**

ุนููุงู URL ููุฃููููุฉ ุงููุฑุงุฏ ุนุฑุถูุง ูู slack

- ุงููุทุงู: `webhook`
- ุงูููุน: `string`
- ุงูุงูุชุฑุงุถู: `"https://webdriver.io/img/webdriverio.png"`

> [!TIP]
> ุจุฌุงูุจ ูุฐูุ ูููู ุฃูุถูุง ุงุณุชุฎุฏุงู ุฌููุน ุงูุฎูุงุฑุงุช ุงููุญุฏุฏุฉ ูู ููุงุตูุงุช [Slack Incoming Webhook](https://www.npmjs.com/package/@slack/webhook).

### Web API (Slack Bot)

#### **token (`ูุทููุจ`)**

[**Web API**](https://api.slack.com/web) ูููุงุฉ slack ุงูุชู ูุฌุจ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุฅูููุง. [ุฑูุฒ ูุณุชุฎุฏู ุจูุช](https://api.slack.com/legacy/oauth#bots) ูุทููุจ. ุฑููุฒ ูุตูู ุงูุจูุช ุชุจุฏุฃ ุฏุงุฆููุง ุจู `xoxb`.
ูุชุทูุจ ุฑูุฒ ุงูุจูุช ูุทุงู OAuth [`chat:write`](https://api.slack.com/scopes/chat:write)ุ [`files:write`](https://api.slack.com/scopes/files:write).
[ุงูุธุฑ ุฃุฏูุงู](https://api.slack.com/methods/chat.postMessage#text_usage) ููุฒูุฏ ูู ุงูุชูุงุตูู.

- ุงููุทุงู: `web-api`
- ุงูููุน: `string`

#### **channel (`ูุทููุจ`)**

ุงูููุงุฉุ ุงููุฌููุนุฉ ุงูุฎุงุตุฉุ ุฃู ููุงุฉ IM ูุฅุฑุณุงู ุงูุฑุณุงูุฉ ุฅูููุง. ูููู ุฃู ุชููู ูุนุฑู ูุดูุฑุ ุฃู ุงุณู. [ุงูุธุฑ ุฃุฏูุงู](https://api.slack.com/legacy/oauth-scopes) ููุฒูุฏ ูู ุงูุชูุงุตูู.
[_`"ููููุฉ ุงูุนุซูุฑ ุนูู ูุนุฑู ุงูููุงุฉ" - stackoverflow -`_](https://stackoverflow.com/questions/57139545/how-can-i-see-slack-bot-info-like-user-id-and-bot-id-without-making-api-call)

- ุงููุทุงู: `web-api`
- ุงูููุน: `string`

> [!TIP]
> ุจุฌุงูุจ ูุฐูุ ูููู ุฃูุถูุง ุงุณุชุฎุฏุงู ุฌููุน ุงูุฎูุงุฑุงุช ุงููุญุฏุฏุฉ ูู ููุงุตูุงุช [Slack Web API](https://www.npmjs.com/package/@slack/web-api).

#### **uploadScreenshotOfFailedCase (`ุงุฎุชูุงุฑู`)**

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู true ูุฅุฑูุงู ููุทุฉ ุดุงุดุฉ ุจุงูุญุงูุฉ ุงููุงุดูุฉ.

- ุงููุทุงู: `web-api`
- ุงูููุน: `boolean`
- ุงูุงูุชุฑุงุถู: `true`

#### **notifyDetailResultThread (`ุงุฎุชูุงุฑู`)**

> ูุนูู ูุฐุง ุงูุฎูุงุฑ ููุท ุนูุฏูุง ูููู ุฎูุงุฑ notifyTestFinishMessage ุตุญูุญูุง.

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู true ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฅุถุงูุฉ ุณูุณูุฉ ูุน ุชูุงุตูู ุงููุชุงุฆุฌ ุฅูู ุฅุดุนุงุฑ ุจูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูููุดูุฑุฉ ุนูู Slack.

- ุงููุทุงู: `web-api`
- ุงูููุน: `boolean`
- ุงูุงูุชุฑุงุถู: `true`

#### **filterForDetailResults (`ุงุฎุชูุงุฑู`)**

> ูุนูู ูุฐุง ุงูุฎูุงุฑ ููุท ุนูุฏูุง ูููู ุฎูุงุฑ notifyDetailResultThread ุตุญูุญูุง.

ุฃุถู ุงููุฑุดุญ ุงูุฐู ุชุฑูุฏู ุฅูู ูุฐุง ุงูุฎูุงุฑ ูู ุงููุตูููุฉ ูุณูุชู ุชุตููุฉ ุงููุชุงุฆุฌ ุงูููุตูุฉ ูู Slack ูุฅุฑุณุงููุง ุฅูู ุงูุณูุณูุฉ.
_(ุฅุฐุง ูู ุชูู ููุงู ูุฑุดุญุงุช (ุงููุตูููุฉ ูุงุฑุบุฉ ุฃู ุบูุฑ ูุญุฏุฏุฉ)ุ ูุชู ุชุทุจูู ุฌููุน ุงููุฑุดุญุงุช.)_
**ูุงุฆูุฉ ุงููุฑุดุญุงุช**: `passed`ุ `failed`ุ `pending`ุ `skipped`

- ุงููุทุงู: `web-api`
- ุงูููุน: `array (passed | failed | pending | skipped)`
- ุงูุงูุชุฑุงุถู: `['passed', 'failed', 'pending', 'skipped']`

#### **createScreenshotPayload (`ุงุฎุชูุงุฑู`)**

ูุฎุตุต ูุฐุง ุงูุฎูุงุฑ ุงูุญูููุฉ ุงูุชู ูุชู ุชุญููููุง ูู ููุทุฉ ุงูุดุงุดุฉ ููุดู ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `web-api`
- ุงูููุน: `function`

#### **createResultDetailPayload (`ุงุฎุชูุงุฑู`)**

ูุฎุตุต ูุฐุง ุงูุฎูุงุฑ ุงูุญูููุฉ ุงูุชู ูุชู ุฅุดุนุงุฑูุง ูู ุงููุชุงุฆุฌ ุงูููุตูุฉ ููุงุฎุชุจุงุฑ.

- ุงููุทุงู: `web-api`
- ุงูููุน: `function`

### ุงููุดุชุฑู

#### **title (`ุงุฎุชูุงุฑู`)**

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู ุนููุงู ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `string`

#### **resultsUrl (`ุงุฎุชูุงุฑู`)**

ูุฏู ุฑุงุจุทูุง ููุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ. ุฅูู ุฑุงุจุท ูุงุจู ููููุฑ ูู ุงูุฅุดุนุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `string`

#### **notifyTestStartMessage (`ุงุฎุชูุงุฑู`)**

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู true ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุจุจุฏุก ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `boolean`
- ุงูุงูุชุฑุงุถู: `true`

#### **notifyFailedCase (`ุงุฎุชูุงุฑู`)**

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู true ูุฅุฑูุงู ุงูุญุงูุงุช ุงููุงุดูุฉ ูู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงููุจูุบ ุนููุง ุฅูู Slack.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `boolean`
- ุงูุงูุชุฑุงุถู: `true`

#### **notifyTestFinishMessage (`ุงุฎุชูุงุฑู`)**

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู true ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุจุงูุชูุงุก ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `boolean`
- ุงูุงูุชุฑุงุถู: `true`

#### **useScenarioBasedStateCounts (`ุงุฎุชูุงุฑู`) - ููุท Cucumber**

ูู ุจุชุนููู ูุฐุง ุงูุฎูุงุฑ ุฅูู true ูุชุบููุฑ ุนุฏุฏ ุงูุญุงูุฉ ูู ุงุฎุชุจุงุฑ (ุฎุทูุงุช) ูุงุฆู ุนูู ุณููุงุฑูู. (ููุท Cucumber)

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `boolean`
- ุงูุงูุชุฑุงุถู: `false`

#### **emojiSymbols (`ุงุฎุชูุงุฑู`)**

ูุบูุฑ ูุฐุง ุงูุฎูุงุฑ ูุฌููุนุฉ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุงูุงูุชุฑุงุถูุฉ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `object`
- ุงูุงูุชุฑุงุถู:
  - passed - โ `:white_check_mark:`
  - failed - โ `:x:`
  - skipped - โธ `:double_vertical_bar:`
  - pending - โ `:grey_question:`
  - start - ๐ `:rocket:`
  - finished - ๐ `:checkered_flag:`
  - watch - โฑ `:stopwatch:`

#### **createStartPayload (`ุงุฎุชูุงุฑู`)**

ูุฎุตุต ูุฐุง ุงูุฎูุงุฑ ุงูุญูููุฉ ุงูุชู ูุชู ุฅุดุนุงุฑูุง ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `function`

#### **createFailedTestPayload (`ุงุฎุชูุงุฑู`)**

ูุฎุตุต ูุฐุง ุงูุฎูุงุฑ ุงูุญูููุฉ ุงูุชู ูุชู ุฅุดุนุงุฑูุง ุนูุฏ ูุดู ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `function`

#### **createResultPayload (`ุงุฎุชูุงุฑู`)**

ูุฎุตุต ูุฐุง ุงูุฎูุงุฑ ุงูุญูููุฉ ุงูุชู ูุชู ุฅุดุนุงุฑูุง ุจูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ.

- ุงููุทุงู: `webhook`ุ `web-api`
- ุงูููุน: `function`

## ุงุณุชุฎุฏุงู Incoming Webhook

ุฅุฐุง ููุช ุชุณุชุฎุฏู webhookุ ูุง ูููู ุงูุชุณูุณู ูุงูุชุญููู.  
ูุฐููุ ุงููุธุงุฆู ุงููุชุนููุฉ ุจู `upload` ู `thread` ุบูุฑ ูุชุงุญุฉ.

### ูุซุงู ุงูุชูููู

```js
// wdio.conf.js
import SlackReporter from "@moroo/wdio-slack-reporter";

export.config = {
  reporters: [
    [
      SlackReporter, {
        // Set the Slack Options used webhook.
        slackOptions: {
          type: 'webhook',
          webhook: process.env.SLACK_WEBHOOK_URL || "https://hooks.slack.com/........",
          username: "WebdriverIO Reporter",
          "icon-url": "https://webdriver.io/img/webdriverio.png",
        },
        // Set the Title of Test.
        title: 'Slack Reporter Test',
        // Set the Test Results URL.
        resultsUrl: process.env.JENKINS_URL,
        // Set the notification of Test Finished
        notifyTestFinishMessage: true,
        // Set the scenario-based state count (Only Cucumber)
        useScenarioBasedStateCounts: true,
        // Customize Slack Emoji Symbols.
        emojiSymbols: {
          passed: ':white_check_mark:',
          failed: ':x:',
          skipped: ':double_vertical_bar:',
          pending: ':grey_question:',
          start: ':rocket:',
          finished: ':checkered_flag:',
          watch: ':stopwatch:'
        },
        // Override the createStartPayload function.
        createStartPayload: function (runnerStats: RunnerStats): IncomingWebhookSendArguments {
          const payload: IncomingWebhookSendArguments = {
            // do something...
          }
          return payload;
        },
        // Override the createFailedTestPayload function.
        createFailedTestPayload: function (testStats: TestStats): IncomingWebhookSendArguments {
          const payload: IncomingWebhookSendArguments = {
            // do something...
          }
          return payload;
        },
        // Override the createResultPayload function.
        createResultPayload: function (runnerStats: RunnerStats, stateCounts: StateCount): IncomingWebhookSendArguments {
          const payload: IncomingWebhookSendArguments = {
            // do something...
          }
          return payload;
        }
      }
    ],
  ],
};
```

## ุงุณุชุฎุฏุงู Web API

ูุงุณุชุฎุฏุงู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุชุ ุชุญุชุงุฌ ุฅูู ูุทุงูุงุช ูุซู ุชูู ุงูููุถุญุฉ ุฃุฏูุงู.  
[`chat:write`](https://api.slack.com/scopes/chat:write)ุ [`files:write`](https://api.slack.com/scopes/files:write). [ุงูุธุฑ ุฃุฏูุงู](https://api.slack.com/legacy/oauth-scopes) ููุฒูุฏ ูู ุงูุชูุงุตูู.  

### ูุซุงู ุงูุชูููู

```js
// wdio.conf.js
import SlackReporter from "@moroo/wdio-slack-reporter";

export.config = {
  reporters: [
    [
      SlackReporter, {
        // Set the Slack Options used web-api.
        slackOptions: {
          type: 'web-api',
          token: process.env.SLACK_BOT_TOKEN || "xoxb-xxxxxxxxxx-xxxxxx...",,
          channel: process.env.SLACK_CHANNEL || "Cxxxxxxxxxx",
          // Set this option to true to attach a screenshot to the failed case.
          uploadScreenshotOfFailedCase: true,
          // Set this option to true if you want to add thread with details of results to notification of test results posted to Slack.
          notifyDetailResultThread: true,
          // Set the Filter for detail results. (array is empty or undefined, all filters are applied.)
          filterForDetailResults: [
            'passed',
            'failed',
            'pending',
            'skipped'
          ],
          // Override the createScreenshotPayload function.
          createScreenshotPayload: function (testStats: TestStats, screenshotBuffer: string | Buffer<ArrayBufferLike>): FilesUploadArguments {
            const payload: FilesUploadArguments = {
              // do something...
            }
            return payload;
          },
          // Override the createResultDetailPayload function.
          createResultDetailPayload: function (runnerStats: RunnerStats, stateCounts: StateCount): ChatPostMessageArguments {
            const payload: ChatPostMessageArguments = {
              // do something...
            }
            return payload;
          }
        },
        // Set the Title of Test.
        title: 'Slack Reporter Test',
        // Set the Test Results URL.
        resultsUrl: process.env.JENKINS_URL,
        // Set the notification of Test Finished
        notifyTestFinishMessage: true,
        // Set the scenario-based state count (Only Cucumber)
        useScenarioBasedStateCounts: true,
        // Customize Slack Emoji Symbols.
        emojiSymbols: {
          passed: ':white_check_mark:',
          failed: ':x:',
          skipped: ':double_vertical_bar:',
          pending: ':grey_question:',
          start: ':rocket:',
          finished: ':checkered_flag:',
          watch: ':stopwatch:'
        },
        // Override the createStartPayload function.
        createStartPayload: function (runnerStats: RunnerStats): IncomingWebhookSendArguments {
          const payload: IncomingWebhookSendArguments = {
            // do something...
          }
          return payload;
        },
        // Override the createFailedTestPayload function.
        createFailedTestPayload: function (testStats: TestStats): IncomingWebhookSendArguments {
          const payload: IncomingWebhookSendArguments = {
            // do something...
          }
          return payload;
        },
        // Override the createResultPayload function.
        createResultPayload: function (runnerStats: RunnerStats, stateCounts: StateCount): IncomingWebhookSendArguments {
          const payload: IncomingWebhookSendArguments = {
            // do something...
          }
          return payload;
        }
      }
    ],
  ],
};
```

## ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงููุฏุนููุฉ

### getResultsUrl

> **ุงูููุน**: `() => string | undefined`

ุงุญุตู ุนูู ุนููุงู URL ูููุชุงุฆุฌ.

```js
// getResultsUrl.spec.ts
import SlackReporter from '@moroo/wdio-slack-reporter';

describe('Get the resultsUrl value', function () {
  before(function () {
    const resultsUrl = SlackReporter.getResultsUrl();
    if (resultsUrl) {
      // do something...
    }
  });
  it('Do something', function () {
    // do something...
  });
});
```

### setResultsUrl

> **ุงูููุน**: `(url: string) => void`

ุงุถุจุท ุนููุงู URL ูููุชุงุฆุฌ.  
_(ูุฐุง ูููุฏ ุฅุฐุง ูุงู ุนููุงู URL ูุน ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ูุชุบูุฑ ูู ูู ูุฑุฉ.)_

```js
// setResultsUrl.spec.ts
import SlackReporter from '@moroo/wdio-slack-reporter';
import { RESULTS_URL } from '../constants';

describe('Set the resultsUrl value', function () {
  before(function () {
    const resultsUrl = RESULTS_URL + new Date().toISOString();
    SlackReporter.setResultsUrl(resultsUrl);
  });
  it('Do something', function () {
    // do something...
  });
});
```

### uploadFailedTestScreenshot

> **ุงูููุน**: `(data: string | Buffer<ArrayBufferLike>) => void`

ุฃุถู ููุทุฉ ุดุงุดุฉ ูุณูุณูุฉ ุฅูู ุฅุดุนุงุฑ ุงูุงุฎุชุจุงุฑ ุงููุงุดู.  
_**(ุฅุฐุง ููุช ุชุณุชุฎุฏู webhookุ ูุณูุคุฏู ูุฐุง ุฅูู ุทุจุงุนุฉ ุชุญุฐูุฑ ููู ููุนู ุดูุฆูุง.)**_

```bash
// terminal console
WARN @moroo/slack-wdio-reporter: Not using web-api or disabled notifyFailedCase or uploadScreenshotOfFailedCase options.
```

```js
// wdio.conf.js
export.config = {
  afterTest: async function (test, context, result) {
    if (error) {
      const result = await browser.takeScreenshot();
      SlackReporter.uploadFailedTestScreenshot(result);
    }
  }
}
```

### postMessage

> **ุงูููุน**: `(payload: ChatPostMessageArguments) => Promise<WebAPICallResult>`

ูุดุฑ ุฑุณุงูุฉ ุฅูู Slack.  
_**(ุฅุฐุง ููุช ุชุณุชุฎุฏู webhookุ ูุณูุคุฏู ูุฐุง ุฅูู ุฑูู ุฎุทุฃ.)**_

```bash
// terminal console
ERROR @moroo/slack-wdio-reporter: Not using web-api.
```

```js
// post.spec.ts
import SlackReporter, {
  ChatPostMessageArguments,
  WebAPICallResult,
} from '@moroo/wdio-slack-reporter';

describe('Post Function Test', function () {
  it('Post a message', async function () {
    const payload: ChatPostMessageArguments = {
      // do something...
    };
    const result: WebAPICallResult = await SlackReporter.post(payload);
  });
});
```

### upload

> **ุงูููุน**: `({ payload: FilesUploadArguments; options: FilesUploadV2Options }) => Promise<WebAPICallResult & {files: FilesCompleteUploadExternalResponse[];}>`

ุชุญููู ููู ุฅูู Slack.  
_**(ุฅุฐุง ููุช ุชุณุชุฎุฏู webhookุ ูุณูุคุฏู ูุฐุง ุฅูู ุฑูู ุฎุทุฃ.)**_

```bash
// terminal console
ERROR @moroo/slack-wdio-reporter: Not using web-api.
```

```js
// upload.spec.ts
import SlackReporter, {
  FilesUploadArguments,
  WebAPICallResult,
} from '@moroo/wdio-slack-reporter';

describe('Upload Function Test', function () {
  it('Upload a files', async function () {
    const payload: FilesUploadArguments = {
      // do something...
    };
    const options: FilesUploadV2Options = {
      waitForUpload: true,
      retry: 3,
      interval: 1000,
    };
    const result: WebAPICallResult = await SlackReporter.upload({
      payload,
      options,
    });
  });
});
```

### send

> **ุงูููุน**: `(payload: IncomingWebhookSendArguments) => Promise<IncomingWebhookResult>`

ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู Slack.  
_**(ุฅุฐุง ููุช ุชุณุชุฎุฏู web-apiุ ูุณูุคุฏู ูุฐุง ุฅูู ุฑูู ุฎุทุฃ.)**_

```bash
// terminal console
ERROR @moroo/slack-wdio-reporter: Not using webhook.
```

```js
// send.spec.ts
import SlackReporter, {
  IncomingWebhookSendArguments,
  IncomingWebhookResult,
} from '@moroo/wdio-slack-reporter';

describe('Sand Function Test', function () {
  it('Send a message', async function () {
    const payload: IncomingWebhookSendArguments = {
      // do something...
    };
    const result: IncomingWebhookResult = await SlackReporter.send(payload);
  });
});
```

## ุฅุถุงูุฉ ููุทุฉ ุงูุดุงุดุฉ

ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฅุถุงูุฉ ููุทุฉ ุดุงุดุฉ ูุณูุณูุฉ ุฅูู ุฅุดุนุงุฑ ุงูุงุฎุชุจุงุฑ ุงููุงุดูุ ุฃุถู ูุธููุฉ `uploadFailedTestScreenshot` ุจุนุฏ ุงูุชูุงุท ููุทุฉ ุงูุดุงุดุฉ.

```js
// wdio.conf.js
export.config = {
  afterTest: async function (test, context, result) {
    if (error) {
      const result = await browser.takeScreenshot();
      SlackReporter.uploadFailedTestScreenshot(result);
    }
  }
}
```

## ุงููุดููุงุช ุงููุนุฑููุฉ

### ุบูุฑ ูุชุฒุงูู

ุฅุฐุง ุญุฏุซ ุงูุฎุทุฃ ุงูุชุงููุ ูู ุจุชุนููู `reporterSyncInterval`ุ `reporterSyncTimeout` ูู `wdio.conf.js`.

```bash
ERROR @wdio/runner: Error: Some reporters are still unsynced: SlackReporter
```

```js
//wdio.conf.js
export.config = {
  //
  // Determines in which interval the reporter should check if they are synchronized if they report their logs asynchronously (e.g. if logs are streamed to a 3rd party vendor).
  reporterSyncInterval: 500,
  // Determines the maximum time reporters have to finish uploading all their logs until an error is being thrown by the testrunner.
  reporterSyncTimeout: 20000,
}
```

### ุฎูุงุฑ Jasmine - expectationResultHandler

ุฅุถุงูุฉ ูุธููุฉ uploadFailedTestScreenshot ููุง ูุง ุชุนูู ุฃูุถูุง.  
ูุฐุง ูุฃู ุงููุธููุฉ ุชุนูู ุจุนุฏ ูู ุงุฎุชุจุงุฑุ ูุฐุง ูุฅู ุงูุงุฎุชุจุงุฑ ุงูุญุงูู ุบูุฑ ูุนุฑูู.

```js
// wdio.conf.js
export.config = {
  jasmineOpts: {
    // Jasmine default timeout
    defaultTimeoutInterval: 60000,
    //
    // The Jasmine framework allows interception of each assertion in order to log the state of the application
    // or website depending on the result. For example, it is pretty handy to take a screenshot every time
    // an assertion fails.
    expectationResultHandler: function (passed, assertion) {
      if (passed) {
        return;
      }
      /*
        Adding the uploadFailedTestScreenshot function here doesn't work either.
        This is because the function works after every test, so the current test is unknown.

        [x] const result = await browser.takeScreenshot();
        [x] SlackReporter.uploadFailedTestScreenshot(result);
      */
    },
  },

  // Add it here.
  afterTest: async function (test, context, result) {
    if (result.error) {
      const result = await browser.takeScreenshot();
      SlackReporter.uploadFailedTestScreenshot(result);
    }
  }
}
```