---
id: ocr-testing
title: اختبار التعرف البصري على النصوص (OCR)
---

يمكن أن يكون الاختبار الآلي لتطبيقات الهاتف المحمول ومواقع سطح المكتب صعبًا بشكل خاص عند التعامل مع العناصر التي تفتقر إلى معرفات فريدة. قد لا تساعدك [محددات WebdriverIO](https://webdriver.io/docs/selectors) القياسية دائمًا. هنا يأتي دور `@wdio/ocr-service`، وهي خدمة قوية تستفيد من التعرف البصري على النصوص ([Optical Character Recognition](https://en.wikipedia.org/wiki/Optical_character_recognition)) للبحث عن العناصر الموجودة على الشاشة والانتظار لها والتفاعل معها بناءً على **النص المرئي** الخاص بها.

سيتم توفير الأوامر المخصصة التالية وإضافتها إلى كائن `browser/driver` بحيث تحصل على مجموعة الأدوات المناسبة للقيام بعملك.

-   [`await browser.ocrGetText`](./ocr-get-text.md)
-   [`await browser.ocrGetElementPositionByText`](./ocr-get-element-position-by-text.md)
-   [`await browser.ocrWaitForTextDisplayed`](./ocr-wait-for-text-displayed.md)
-   [`await browser.ocrClickOnText`](./ocr-click-on-text.md)
-   [`await browser.ocrSetValue`](./ocr-set-value.md)

### كيف تعمل

ستقوم هذه الخدمة بما يلي

1. إنشاء لقطة شاشة لشاشتك/جهازك. (إذا لزم الأمر، يمكنك توفير نطاق البحث، والذي يمكن أن يكون عنصرًا أو كائن مستطيل، لتحديد منطقة معينة. راجع وثائق كل أمر.)
1. تحسين النتيجة للتعرف البصري على النصوص من خلال تحويل لقطة الشاشة إلى أبيض/أسود مع لقطة شاشة عالية التباين (التباين العالي مطلوب لمنع الكثير من ضوضاء خلفية الصورة. يمكن تخصيص ذلك لكل أمر.)
1. استخدام [التعرف البصري على النصوص](https://en.wikipedia.org/wiki/Optical_character_recognition) من [Tesseract.js](https://github.com/naptha/tesseract.js)/[Tesseract](https://github.com/tesseract-ocr/tesseract) للحصول على جميع النصوص من الشاشة وتسليط الضوء على جميع النصوص الموجودة في الصورة. يمكنها دعم عدة لغات يمكن العثور عليها [هنا.](https://tesseract-ocr.github.io/tessdoc/Data-Files-in-different-versions.html)
1. استخدام المنطق الضبابي من [Fuse.js](https://fusejs.io/) للعثور على السلاسل النصية التي تكون _متساوية تقريبًا_ مع نمط معين (بدلاً من المساواة التامة). هذا يعني على سبيل المثال أن قيمة البحث `Username` يمكن أن تجد أيضًا النص `Usename` أو العكس.
1. توفير معالج واجهة سطر الأوامر (`npx ocr-service`) للتحقق من صورك واسترجاع النص من خلال الطرفية الخاصة بك

يمكن العثور على مثال للخطوات 1 و2 و3 في هذه الصورة

![خطوات المعالجة](/img/ocr/processing-steps.jpg)

تعمل مع **صفر** من التبعيات النظامية (بخلاف ما يستخدمه WebdriverIO)، ولكن إذا لزم الأمر، يمكنها أيضًا العمل مع تثبيت محلي من [Tesseract](https://tesseract-ocr.github.io/tessdoc/) مما سيقلل من وقت التنفيذ بشكل كبير! (انظر أيضًا [تحسين تنفيذ الاختبار](#test-execution-optimization) حول كيفية تسريع اختباراتك.)

متحمس؟ ابدأ في استخدامه اليوم من خلال اتباع دليل [البدء](./getting-started).

:::caution هام
هناك مجموعة متنوعة من الأسباب التي قد تمنعك من الحصول على مخرجات ذات جودة عالية من Tesseract. أحد أكبر الأسباب التي قد تكون مرتبطة بتطبيقك وهذه الوحدة يمكن أن يكون حقيقة أنه لا يوجد تمييز مناسب في اللون بين النص الذي يجب العثور عليه والخلفية. على سبيل المثال، يمكن العثور على النص الأبيض على خلفية داكنة _بسهولة_، ولكن النص الفاتح على خلفية بيضاء أو النص الداكن على خلفية داكنة يصعب العثور عليه.

راجع أيضًا [هذه الصفحة](https://tesseract-ocr.github.io/tessdoc/ImproveQuality) لمزيد من المعلومات من Tesseract.

لا تنس أيضًا قراءة [الأسئلة الشائعة](./ocr-faq).
:::