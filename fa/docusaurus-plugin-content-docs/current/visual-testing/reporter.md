---
id: visual-reporter
title: گزارشگر تصویری
---

گزارشگر تصویری یک ویژگی جدید است که در `@wdio/visual-service` از نسخه [v5.2.0](https://github.com/webdriverio/visual-testing/releases/tag/%40wdio%2Fvisual-service%405.2.0) معرفی شده است. این گزارشگر به کاربران امکان می‌دهد گزارش‌های تفاوت JSON تولید شده توسط سرویس تست بصری را مشاهده کرده و آن‌ها را به فرمت قابل خواندن برای انسان تبدیل کنند. این ابزار با ارائه یک رابط گرافیکی برای بررسی خروجی‌ها، به تیم‌ها کمک می‌کند تا نتایج تست‌های بصری را بهتر تحلیل و مدیریت کنند.

برای استفاده از این ویژگی، مطمئن شوید که پیکربندی لازم برای تولید فایل `output.json` را دارید. این سند شما را در راه‌اندازی، اجرا و درک گزارشگر تصویری راهنمایی خواهد کرد.

# پیش‌نیازها

قبل از استفاده از گزارشگر تصویری، مطمئن شوید که سرویس تست بصری را برای تولید فایل‌های گزارش JSON پیکربندی کرده‌اید:

```ts
export const config = {
    // ...
    services: [
        [
            "visual",
            {
                createJsonReportFiles: true, // Generates the output.json file
            },
        ],
    ],
};
```

برای دستورالعمل‌های راه‌اندازی دقیق‌تر، به مستندات [تست بصری WebdriverIO](./) یا [`createJsonReportFiles`](./service-options.md#createjsonreportfiles-new) مراجعه کنید.

# نصب

برای نصب گزارشگر تصویری، آن را به عنوان وابستگی توسعه‌ای به پروژه خود با استفاده از npm اضافه کنید:

```bash
npm install @wdio/visual-reporter --save-dev
```

این کار اطمینان حاصل می‌کند که فایل‌های لازم برای تولید گزارش از تست‌های بصری شما موجود هستند.

# استفاده

## ساخت گزارش تصویری

پس از اجرای تست‌های بصری و تولید فایل `output.json`، می‌توانید گزارش تصویری را با استفاده از CLI یا پرسش‌های تعاملی بسازید.

### استفاده از CLI

می‌توانید از دستور CLI برای تولید گزارش با اجرای دستور زیر استفاده کنید:

```bash
npx wdio-visual-reporter --jsonOutput=<path-to-output.json> --reportFolder=<path-to-store-report> --logLevel=debug
```

#### گزینه‌های ضروری:

- `--jsonOutput`: مسیر نسبی به فایل `output.json` تولید شده توسط سرویس تست بصری. این مسیر نسبت به دایرکتوری‌ای است که دستور را از آنجا اجرا می‌کنید.
- `--reportFolder`: دایرکتوری نسبی که گزارش تولید شده در آن ذخیره خواهد شد. این مسیر نیز نسبت به دایرکتوری‌ای است که دستور را از آنجا اجرا می‌کنید.

#### گزینه‌های اختیاری:

- `--logLevel`: تنظیم به `debug` برای دریافت گزارش‌های مفصل، به خصوص برای عیب‌یابی مفید است.

#### مثال

```bash
npx wdio-visual-reporter --jsonOutput=/path/to/output.json --reportFolder=/path/to/report --logLevel=debug
```

این دستور گزارش را در پوشه مشخص شده تولید کرده و بازخورد را در کنسول نمایش می‌دهد. برای مثال:

```bash
✔ Build output copied successfully to "/path/to/report".
⠋ Prepare report assets...
✔ Successfully generated the report assets.
```

#### مشاهده گزارش

:::warning
باز کردن مستقیم `path/to/report/index.html` در مرورگر **بدون سرو کردن آن از یک سرور محلی** کار **نخواهد** کرد.
:::

برای مشاهده گزارش، نیاز دارید از یک سرور ساده مانند [sirv-cli](https://www.npmjs.com/package/sirv-cli) استفاده کنید. می‌توانید سرور را با دستور زیر شروع کنید:

```bash
npx sirv-cli /path/to/report --single
```

این دستور، گزارش‌هایی مشابه نمونه زیر تولید خواهد کرد. توجه داشته باشید که شماره پورت ممکن است متفاوت باشد:

```logs
  Your application is ready~! 🚀

  - Local:      http://localhost:8080
  - Network:    Add `--host` to expose

────────────────── LOGS ──────────────────
```

اکنون می‌توانید با باز کردن URL ارائه شده در مرورگر خود، گزارش را مشاهده کنید.

### استفاده از پرسش‌های تعاملی

به طور جایگزین، می‌توانید دستور زیر را اجرا کرده و به پرسش‌ها پاسخ دهید تا گزارش را تولید کنید:

```bash
npx @wdio/visual-reporter
```

پرسش‌ها شما را در ارائه مسیرها و گزینه‌های مورد نیاز راهنمایی خواهند کرد. در پایان، پرسش تعاملی همچنین از شما می‌پرسد که آیا می‌خواهید یک سرور برای مشاهده گزارش راه‌اندازی کنید. اگر تصمیم بگیرید سرور را راه‌اندازی کنید، ابزار یک سرور ساده را راه‌اندازی کرده و یک URL را در گزارش‌ها نمایش می‌دهد. می‌توانید این URL را در مرورگر خود باز کنید تا گزارش را مشاهده کنید.

![Visual Reporter CLI](/img/visual/cli-screen-recording.gif)

![Visual Reporter](/img/visual/visual-reporter.gif)

#### مشاهده گزارش

:::warning
باز کردن مستقیم `path/to/report/index.html` در مرورگر **بدون سرو کردن آن از یک سرور محلی** کار **نخواهد** کرد.
:::

اگر از طریق پرسش تعاملی **تصمیم نگرفتید** که سرور را راه‌اندازی کنید، همچنان می‌توانید گزارش را با اجرای دستی دستور زیر مشاهده کنید:

```bash
npx sirv-cli /path/to/report --single
```

این دستور، گزارش‌هایی مشابه نمونه زیر تولید خواهد کرد. توجه داشته باشید که شماره پورت ممکن است متفاوت باشد:

```logs
  Your application is ready~! 🚀

  - Local:      http://localhost:8080
  - Network:    Add `--host` to expose

────────────────── LOGS ──────────────────
```

اکنون می‌توانید با باز کردن URL ارائه شده در مرورگر خود، گزارش را مشاهده کنید.

# نمایش گزارش

برای دیدن نمونه‌ای از نحوه نمایش گزارش، از [دمو GitHub Pages](https://webdriverio.github.io/visual-testing/) ما بازدید کنید.

# درک گزارش تصویری

گزارشگر تصویری نمایی سازمان‌یافته از نتایج تست بصری شما ارائه می‌دهد. برای هر اجرای تست، قادر خواهید بود:

- به راحتی بین موارد تست حرکت کرده و نتایج تجمعی را مشاهده کنید.
- فراداده‌هایی مانند نام‌های تست، مرورگرهای استفاده شده و نتایج مقایسه را بررسی کنید.
- تصاویر تفاوت را مشاهده کنید که نشان می‌دهند کجا تفاوت‌های بصری شناسایی شده‌اند.

این نمایش تصویری، تحلیل نتایج تست شما را ساده‌تر می‌کند و شناسایی و رفع پسرفت‌های بصری را آسان‌تر می‌سازد.

# ادغام با CI

ما در حال کار بر روی پشتیبانی از ابزارهای CI مختلف مانند Jenkins، GitHub Actions و غیره هستیم. اگر می‌خواهید به ما کمک کنید، لطفاً با ما در [Discord - Visual Testing](https://discord.com/channels/1097401827202445382/1186908940286574642) تماس بگیرید.