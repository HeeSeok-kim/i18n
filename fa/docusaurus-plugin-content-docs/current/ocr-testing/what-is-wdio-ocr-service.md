---
id: ocr-testing
title: تست OCR
---

تست خودکار در اپلیکیشن‌های موبایل و سایت‌های دسکتاپ می‌تواند چالش برانگیز باشد، مخصوصاً زمانی که با عناصری مواجه می‌شوید که شناسه‌های منحصر به فردی ندارند. انتخابگرهای استاندارد [WebdriverIO](https://webdriver.io/docs/selectors) همیشه نمی‌توانند به شما کمک کنند. وارد دنیای `@wdio/ocr-service` شوید، سرویسی قدرتمند که از OCR ([تشخیص نوری کاراکتر](https://en.wikipedia.org/wiki/Optical_character_recognition)) استفاده می‌کند تا بر اساس **متن قابل مشاهده**، عناصر روی صفحه را جستجو، منتظر آنها بماند و با آنها تعامل کند.

دستورات سفارشی زیر ارائه و به شیء `browser/driver` اضافه می‌شوند تا مجموعه ابزار مناسب برای انجام کار خود را داشته باشید.

-   [`await browser.ocrGetText`](./ocr-get-text.md)
-   [`await browser.ocrGetElementPositionByText`](./ocr-get-element-position-by-text.md)
-   [`await browser.ocrWaitForTextDisplayed`](./ocr-wait-for-text-displayed.md)
-   [`await browser.ocrClickOnText`](./ocr-click-on-text.md)
-   [`await browser.ocrSetValue`](./ocr-set-value.md)

### چگونه کار می‌کند

این سرویس:

1. یک اسکرین‌شات از صفحه/دستگاه شما ایجاد می‌کند. (در صورت نیاز می‌توانید یک haystack ارائه دهید، که می‌تواند یک عنصر یا یک شی مستطیلی باشد، تا یک منطقه خاص را مشخص کنید. به مستندات هر دستور مراجعه کنید.)
1. نتیجه را برای OCR بهینه‌سازی می‌کند با تبدیل اسکرین‌شات به سیاه/سفید با کنتراست بالا (کنتراست بالا برای جلوگیری از نویز پس‌زمینه تصویر لازم است. این قابلیت را می‌توان برای هر دستور سفارشی کرد.)
1. از [تشخیص نوری کاراکتر](https://en.wikipedia.org/wiki/Optical_character_recognition) از [Tesseract.js](https://github.com/naptha/tesseract.js)/[Tesseract](https://github.com/tesseract-ocr/tesseract) استفاده می‌کند تا تمام متن‌ها را از صفحه دریافت کند و تمام متن‌های یافت شده را در تصویر برجسته کند. می‌تواند چندین زبان را پشتیبانی کند که در [اینجا](https://tesseract-ocr.github.io/tessdoc/Data-Files-in-different-versions.html) می‌توانید پیدا کنید.
1. از منطق فازی از [Fuse.js](https://fusejs.io/) استفاده می‌کند تا رشته‌هایی را پیدا کند که _تقریباً برابر_ با الگوی داده شده هستند (به جای دقیقاً برابر). این یعنی برای مثال مقدار جستجوی `Username` می‌تواند متن `Usename` را نیز پیدا کند یا برعکس.
1. یک ویزارد خط فرمان (`npx ocr-service`) را ارائه می‌دهد تا تصاویر خود را اعتبارسنجی کنید و متن را از طریق ترمینال خود بازیابی کنید

یک مثال از مراحل 1، 2 و 3 را می‌توانید در این تصویر ببینید

![Process steps](/img/ocr/processing-steps.jpg)

این سرویس با **هیچ** وابستگی سیستمی (به جز آنچه WebdriverIO استفاده می‌کند) کار می‌کند، اما در صورت نیاز می‌تواند با نصب محلی [Tesseract](https://tesseract-ocr.github.io/tessdoc/) نیز کار کند که زمان اجرا را به شدت کاهش می‌دهد! (همچنین به [بهینه‌سازی اجرای تست](#test-execution-optimization) درباره چگونگی تسریع تست‌ها مراجعه کنید.)

مشتاق هستید؟ با دنبال کردن راهنمای [شروع به کار](./getting-started) همین امروز شروع به استفاده از آن کنید.

:::caution مهم
دلایل مختلفی وجود دارد که ممکن است خروجی با کیفیت خوبی از Tesseract دریافت نکنید. یکی از بزرگترین دلایلی که می‌تواند به برنامه شما و این ماژول مرتبط باشد، این است که تمایز رنگی مناسبی بین متنی که باید پیدا شود و پس‌زمینه وجود ندارد. به عنوان مثال، متن سفید روی پس‌زمینه تیره می‌تواند _به آسانی_ پیدا شود، اما متن روشن روی پس‌زمینه سفید یا متن تیره روی پس‌زمینه تیره به سختی قابل یافتن است.

برای اطلاعات بیشتر از Tesseract، به [این صفحه](https://tesseract-ocr.github.io/tessdoc/ImproveQuality) مراجعه کنید.

همچنین فراموش نکنید که [سوالات متداول](./ocr-faq) را مطالعه کنید.
:::