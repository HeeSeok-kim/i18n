---
id: ocr-testing
title: تست OCR
---

تست خودکار در اپلیکیشن‌های موبایلی و سایت‌های دسکتاپ می‌تواند بسیار چالش‌برانگیز باشد، به‌ویژه زمانی که با عناصری روبرو می‌شویم که شناسه‌های منحصر به فردی ندارند. انتخابگرهای استاندارد [WebdriverIO selectors](https://webdriver.io/docs/selectors) همیشه به شما کمک نمی‌کنند. اینجاست که `@wdio/ocr-service` وارد عمل می‌شود، سرویسی قدرتمند که از OCR ([تشخیص نوری کاراکتر](https://en.wikipedia.org/wiki/Optical_character_recognition)) برای جستجو، انتظار و تعامل با عناصر روی صفحه بر اساس **متن نمایش داده شده** آنها استفاده می‌کند.

دستورات سفارشی زیر ارائه شده و به شیء `browser/driver` اضافه می‌شوند تا مجموعه ابزار مناسبی برای انجام کار خود داشته باشید.

-   [`await browser.ocrGetText`](./ocr-get-text.md)
-   [`await browser.ocrGetElementPositionByText`](./ocr-get-element-position-by-text.md)
-   [`await browser.ocrWaitForTextDisplayed`](./ocr-wait-for-text-displayed.md)
-   [`await browser.ocrClickOnText`](./ocr-click-on-text.md)
-   [`await browser.ocrSetValue`](./ocr-set-value.md)

### چگونه کار می‌کند

این سرویس:

1. از صفحه/دستگاه شما اسکرین‌شات می‌گیرد. (در صورت نیاز می‌توانید یک haystack ارائه دهید، که می‌تواند یک عنصر یا یک شیء مستطیلی باشد، تا منطقه خاصی را مشخص کنید. به مستندات هر دستور مراجعه کنید.)
1. نتیجه را برای OCR بهینه‌سازی می‌کند با تبدیل اسکرین‌شات به سیاه/سفید با کنتراست بالا (کنتراست بالا برای جلوگیری از نویز پس‌زمینه تصویر لازم است. این می‌تواند برای هر دستور سفارشی‌سازی شود.)
1. از [تشخیص نوری کاراکتر](https://en.wikipedia.org/wiki/Optical_character_recognition) از [Tesseract.js](https://github.com/naptha/tesseract.js)/[Tesseract](https://github.com/tesseract-ocr/tesseract) استفاده می‌کند تا تمام متن را از صفحه دریافت کرده و تمام متن‌های پیدا شده را روی تصویر برجسته کند. این سرویس از چندین زبان پشتیبانی می‌کند که می‌توانید در [اینجا](https://tesseract-ocr.github.io/tessdoc/Data-Files-in-different-versions.html) پیدا کنید.
1. از منطق فازی [Fuse.js](https://fusejs.io/) برای یافتن رشته‌هایی استفاده می‌کند که _تقریباً برابر_ با الگوی داده شده هستند (نه دقیقاً). این بدان معناست که مثلاً مقدار جستجوی `Username` می‌تواند متن `Usename` را نیز پیدا کند یا برعکس.
1. یک ویزارد خط فرمان (`npx ocr-service`) ارائه می‌دهد تا تصاویر خود را اعتبارسنجی کرده و متن را از طریق ترمینال بازیابی کنید

نمونه‌ای از مراحل 1، 2 و 3 را می‌توانید در این تصویر مشاهده کنید

![Process steps](/img/ocr/processing-steps.jpg)

این سرویس با **صفر** وابستگی سیستمی (به جز آنچه WebdriverIO استفاده می‌کند) کار می‌کند، اما در صورت نیاز می‌تواند با نصب محلی [Tesseract](https://tesseract-ocr.github.io/tessdoc/) نیز کار کند که زمان اجرا را به‌طور چشمگیری کاهش می‌دهد! (همچنین به [بهینه‌سازی اجرای تست](#test-execution-optimization) برای افزایش سرعت تست‌های خود مراجعه کنید.)

مشتاق هستید؟ با دنبال کردن راهنمای [شروع به کار](./getting-started) امروز شروع به استفاده کنید.

:::caution مهم
دلایل متعددی وجود دارد که ممکن است خروجی با کیفیت خوبی از Tesseract دریافت نکنید. یکی از بزرگترین دلایلی که می‌تواند به برنامه شما و این ماژول مرتبط باشد، این است که تمایز رنگی مناسبی بین متنی که باید پیدا شود و پس‌زمینه وجود ندارد. به عنوان مثال، متن سفید روی پس‌زمینه تیره _به راحتی_ قابل یافتن است، اما متن روشن روی پس‌زمینه سفید یا متن تیره روی پس‌زمینه تیره به سختی قابل یافتن است.

همچنین [این صفحه](https://tesseract-ocr.github.io/tessdoc/ImproveQuality) را برای اطلاعات بیشتر از Tesseract ببینید.

فراموش نکنید که [سوالات متداول](./ocr-faq) را نیز مطالعه کنید.
:::