---
id: bamboo
title: بامبو
---

WebdriverIO ادغام قوی با سیستم‌های CI مانند [Bamboo](https://www.atlassian.com/software/bamboo) ارائه می‌دهد. با گزارشگرهای [JUnit](https://webdriver.io/docs/junit-reporter.html) یا [Allure](https://webdriver.io/docs/allure-reporter.html)، می‌توانید به راحتی آزمایش‌های خود را اشکال‌زدایی کرده و نتایج آزمایش‌های خود را پیگیری کنید. ادغام بسیار ساده است.

1. نصب گزارشگر تست JUnit: `$ npm install @wdio/junit-reporter --save-dev`)
1. به‌روزرسانی پیکربندی برای ذخیره نتایج JUnit در مکانی که بامبو بتواند آنها را پیدا کند (و مشخص کردن گزارشگر `junit`):

```js
// wdio.conf.js
module.exports = {
    // ...
    reporters: [
        'dot',
        ['junit', {
            outputDir: './testresults/'
        }]
    ],
    // ...
}
```
نکته: *همیشه استاندارد خوبی است که نتایج آزمایش را در پوشه جداگانه نگهداری کنید، نه در پوشه ریشه.*

```js
// wdio.conf.js - برای آزمایش‌هایی که به صورت موازی اجرا می‌شوند
module.exports = {
    // ...
    reporters: [
        'dot',
        ['junit', {
            outputDir: './testresults/',
            outputFileFormat: function (options) {
                return `results-${options.cid}.xml`;
            }
        }]
    ],
    // ...
}
```

گزارش‌ها برای همه فریم‌ورک‌ها مشابه خواهند بود و می‌توانید از هر یک استفاده کنید: Mocha، Jasmine یا Cucumber.

تا این زمان، ما فرض می‌کنیم که شما آزمایش‌ها را نوشته‌اید و نتایج در پوشه `./testresults/` تولید شده‌اند، و بامبوی شما در حال اجراست.

## ادغام آزمایش‌های خود در بامبو

1. پروژه بامبوی خود را باز کنید
    > یک طرح جدید ایجاد کنید، مخزن خود را پیوند دهید (مطمئن شوید که همیشه به جدیدترین نسخه مخزن شما اشاره می‌کند) و مراحل خود را ایجاد کنید

    ![جزئیات طرح](/img/bamboo/plancreation.png "جزئیات طرح")

    من با مرحله و کار پیش‌فرض پیش خواهم رفت. در مورد شما، می‌توانید مراحل و کارهای خود را ایجاد کنید

    ![مرحله پیش‌فرض](/img/bamboo/defaultstage.png "مرحله پیش‌فرض")
2. کار آزمایشی خود را باز کنید و وظایفی برای اجرای آزمایش‌های خود در بامبو ایجاد کنید
    >**وظیفه 1:** بررسی کد منبع

    >**وظیفه 2:** اجرای آزمایش‌های خود `npm i && npm run test`. می‌توانید از وظیفه *Script* و *مفسر Shell* برای اجرای دستورات بالا استفاده کنید (این کار نتایج آزمایش را تولید کرده و آنها را در پوشه `./testresults/` ذخیره می‌کند)

    ![اجرای آزمایش](/img/bamboo/testrun.png "اجرای آزمایش")

    >**وظیفه: 3** افزودن وظیفه *jUnit Parser* برای تجزیه نتایج آزمایش ذخیره شده. لطفاً دایرکتوری نتایج آزمایش را در اینجا مشخص کنید (می‌توانید از الگوهای سبک Ant نیز استفاده کنید)

    ![jUnit Parser](/img/bamboo/junitparser.png "jUnit Parser")

    نکته: *مطمئن شوید که وظیفه تجزیه نتایج را در بخش *Final* قرار می‌دهید، تا همیشه حتی اگر وظیفه آزمایش شما با شکست مواجه شد، اجرا شود*

    >**وظیفه: 4** (اختیاری) برای اطمینان از اینکه نتایج آزمایش شما با فایل‌های قدیمی مخلوط نمی‌شوند، می‌توانید وظیفه‌ای برای حذف پوشه `./testresults/` پس از تجزیه موفقیت‌آمیز به بامبو ایجاد کنید. می‌توانید یک اسکریپت شل مانند `rm -f ./testresults/*.xml` برای حذف نتایج یا `rm -r testresults` برای حذف کامل پوشه اضافه کنید

پس از انجام این *علم موشکی*، لطفاً طرح را فعال کرده و آن را اجرا کنید. خروجی نهایی شما به شکل زیر خواهد بود:

## آزمایش موفق

![آزمایش موفق](/img/bamboo/successfulltest.png "آزمایش موفق")

## آزمایش ناموفق

![آزمایش ناموفق](/img/bamboo/failedtest.png "آزمایش ناموفق")

## ناموفق و تعمیر شده

![ناموفق و تعمیر شده](/img/bamboo/failedandfixed.png "ناموفق و تعمیر شده")

هورا!! همین است. شما با موفقیت آزمایش‌های WebdriverIO خود را در بامبو ادغام کرده‌اید.