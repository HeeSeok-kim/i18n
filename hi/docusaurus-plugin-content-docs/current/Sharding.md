---
id: sharding
title: рд╢рд╛рд░реНрдбрд┐рдВрдЧ
---

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, WebdriverIO рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдЪрд▓рд╛рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреА рдорд╢реАрди рдкрд░ CPU рдХреЛрд░ рдХреЗ рдЗрд╖реНрдЯрддрдо рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИред рдФрд░ рднреА рдЕрдзрд┐рдХ рд╕рдорд╛рдирд╛рдВрддрд░реАрдХрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рд╕рд╛рде рдХрдИ рдорд╢реАрдиреЛрдВ рдкрд░ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдХрд░ WebdriverIO рдкрд░реАрдХреНрд╖рдг рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдФрд░ рдЕрдзрд┐рдХ рдмрдврд╝рд╛ рд╕рдХрддреЗ рд╣реИрдВред рд╣рдо рдЗрд╕ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдореЛрдб рдХреЛ "рд╢рд╛рд░реНрдбрд┐рдВрдЧ" рдХрд╣рддреЗ рд╣реИрдВред

## рдХрдИ рдорд╢реАрдиреЛрдВ рдХреЗ рдмреАрдЪ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреА рд╢рд╛рд░реНрдбрд┐рдВрдЧ

рдЯреЗрд╕реНрдЯ рд╕реВрдЯ рдХреЛ рд╢рд╛рд░реНрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдореЗрдВ `--shard=x/y` рдкрд╛рд╕ рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реВрдЯ рдХреЛ рдЪрд╛рд░ рд╢рд╛рд░реНрдбреНрд╕ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдПрдХ рдЪреМрдерд╛рдИ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдПрдЧрд╛:

```sh
npx wdio run wdio.conf.js --shard=1/4
npx wdio run wdio.conf.js --shard=2/4
npx wdio run wdio.conf.js --shard=3/4
npx wdio run wdio.conf.js --shard=4/4
```

рдЕрдм, рдпрджрд┐ рдЖрдк рдЗрди рд╢рд╛рд░реНрдбреНрд╕ рдХреЛ рд╡рд┐рднрд┐рдиреНрди рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдкрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХрд╛ рдкрд░реАрдХреНрд╖рдг рд╕реВрдЯ рдЪрд╛рд░ рдЧреБрдирд╛ рддреЗрдЬреА рд╕реЗ рдкреВрд░рд╛ рд╣реЛрддрд╛ рд╣реИред

## GitHub Actions рдЙрджрд╛рд╣рд░рдг

GitHub Actions [`jobs.<job_id>.strategy.matrix`](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix) рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ [рдХрдИ рдЬреЙрдмреНрд╕ рдХреЗ рдмреАрдЪ рд╢рд╛рд░реНрдбрд┐рдВрдЧ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди](https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs) рдХрд░рддрд╛ рд╣реИред рдореИрдЯреНрд░рд┐рдХреНрд╕ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╣рд░ рд╕рдВрднрд╡ рд╕рдВрдпреЛрдЬрди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдЬреЙрдм рдЪрд▓рд╛рдПрдЧрд╛ред

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрджрд╛рд╣рд░рдг рдЖрдкрдХреЛ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдЪрд╛рд░ рдорд╢реАрдиреЛрдВ рдкрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдЕрдкрдиреЗ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЙрдм рдХреЛ рдХреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред рдЖрдк рдкреВрд░рд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рд╕реЗрдЯрдЕрдк [Cucumber Boilerplate](https://github.com/webdriverio/cucumber-boilerplate/blob/main/.github/workflows/test.yaml) рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

-   рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд╣рдо рдЕрдкрдиреЗ рдЬреЙрдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдореИрдЯреНрд░рд┐рдХреНрд╕ рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рд░реНрдб рд╡рд┐рдХрд▓реНрдк рд╢рд╛рдорд┐рд▓ рд╣реИ рдЬреЛ рд╣рдореЗрдВ рдмрдирд╛рдиреЗ рд╡рд╛рд▓реЗ рд╢рд╛рд░реНрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрддрд╛рддрд╛ рд╣реИред `shard: [1, 2, 3, 4]` рдЪрд╛рд░ рд╢рд╛рд░реНрдбреНрд╕ рдмрдирд╛рдПрдЧрд╛, рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рдкрд╛рд╕ рдПрдХ рдЕрд▓рдЧ рд╢рд╛рд░реНрдб рдирдВрдмрд░ рд╣реЛрдЧрд╛ред
-   рдлрд┐рд░ рд╣рдо рдЕрдкрдиреЗ WebdriverIO рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ `--shard ${{ matrix.shard }}/${{ strategy.job-total }}` рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рддреЗ рд╣реИрдВред рдпрд╣ рдкреНрд░рддреНрдпреЗрдХ рд╢рд╛рд░реНрдб рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░рд╛ рдкрд░реАрдХреНрд╖рдг рдХрдорд╛рдВрдб рд╣реЛрдЧрд╛ред
-   рдЕрдВрдд рдореЗрдВ рд╣рдо рдЕрдкрдиреА wdio рд▓реЙрдЧ рд░рд┐рдкреЛрд░реНрдЯ рдХреЛ GitHub Actions Artifacts рдореЗрдВ рдЕрдкрд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рд▓реЙрдЧреНрд╕ рдХреЛ рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдПрдЧрд╛ рдпрджрд┐ рд╢рд╛рд░реНрдб рд╡рд┐рдлрд▓ рд╣реЛрддрд╛ рд╣реИред

рдкрд░реАрдХреНрд╖рдг рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реИ:

```yaml title=.github/workflows/test.yaml
name: Test

on: [push, pull_request]

jobs:
    lint:
        # ...
    unit:
        # ...
    e2e:
        name: ЁЯзк Test (${{ matrix.shard }}/${{ strategy.job-total }})
        runs-on: ubuntu-latest
        needs: [lint, unit]
        strategy:
            matrix:
                shard: [1, 2, 3, 4]
        steps:
            - uses: actions/checkout@v4
            - uses: ./.github/workflows/actions/setup
            - name: E2E Test
              run: npm run test:features -- --shard ${{ matrix.shard }}/${{ strategy.job-total }}
            - uses: actions/upload-artifact@v1
              if: failure()
              with:
                  name: logs-${{ matrix.shard }}
                  path: logs
```

рдпрд╣ рд╕рднреА рд╢рд╛рд░реНрдбреНрд╕ рдХреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдЪрд▓рд╛рдПрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп 4 рд╕реЗ рдХрдо рд╣реЛ рдЬрд╛рдПрдЧрд╛:

![GitHub Actions рдЙрджрд╛рд╣рд░рдг](/img/sharding.png "GitHub Actions рдЙрджрд╛рд╣рд░рдг")

[Cucumber Boilerplate](https://github.com/webdriverio/cucumber-boilerplate) рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗ рдХрдорд┐рдЯ [`96d444e`](https://github.com/webdriverio/cucumber-boilerplate/commit/96d444ea23919389682b9b1c9408ed91c452c7f8) рджреЗрдЦреЗрдВ рдЬрд┐рд╕рдиреЗ рдЕрдкрдиреЗ рдЯреЗрд╕реНрдЯ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдореЗрдВ рд╢рд╛рд░реНрдбрд┐рдВрдЧ рдХреЛ рдкреЗрд╢ рдХрд┐рдпрд╛, рдЬрд┐рд╕рд╕реЗ рдХреБрд▓ рдирд┐рд╖реНрдкрд╛рджрди рд╕рдордп `2:23 рдорд┐рдирдЯ` рд╕реЗ рдШрдЯрдХрд░ `1:30 рдорд┐рдирдЯ` рддрдХ рд╣реЛ рдЧрдпрд╛, рдпрд╛рдиреА __37%__ рдХреА рдХрдореА ЁЯОЙред