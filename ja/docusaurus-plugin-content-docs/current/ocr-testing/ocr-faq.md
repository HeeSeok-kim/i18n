---
id: ocr-faq
title: よくある質問
---

## テストが非常に遅い

この `@wdio/ocr-service` を使用するとき、テストを高速化するためではなく、Web/モバイルアプリでの要素の特定が難しく、より簡単に要素を特定する方法が欲しいために使用します。何かを得る時には別の何かを失うということは皆さんご存知でしょう。**ただし...** 通常よりも速く `@wdio/ocr-service` を実行する方法があります。詳細は[こちら](./more-test-optimization)をご覧ください。

## このサービスのコマンドをデフォルトのWebdriverIOコマンド/セレクタと一緒に使用できますか？

はい、コマンドを組み合わせてスクリプトをさらに強力にすることができます！アドバイスとしては、できるだけデフォルトのWebdriverIOコマンド/セレクタを使用し、一意のセレクタが見つからない場合や、セレクタが非常に脆弱になりそうな場合にのみこのサービスを使用することです。

## テキストが見つからないのはなぜですか？

まず、このモジュールでのOCRプロセスがどのように機能するかを理解することが重要です。[こちら](./ocr-testing)のページをお読みください。それでもテキストが見つからない場合は、以下のことを試してみてください。

### 画像の領域が大きすぎる

モジュールがスクリーンショットの広い領域を処理する必要がある場合、テキストが見つからないことがあります。コマンドを使用する際に、haystackを提供することで、より小さな領域を指定できます。haystackの提供をサポートするコマンドについては[コマンド](./ocr-click-on-text)をご確認ください。

### テキストと背景のコントラストが適切でない

これは、白い背景に薄いテキストや、暗い背景に暗いテキストがある場合に発生することがあります。これによりテキストが見つからない結果になることがあります。以下の例では、`Why WebdriverIO?`というテキストが白色で、グレーのボタンに囲まれています。この場合、`Why WebdriverIO?`というテキストは見つかりません。特定のコマンドのコントラストを上げることで、テキストを見つけてクリックすることができます。2番目の画像を参照してください。

```js
await driver.ocrClickOnText({
    haystack: { height: 44, width: 1108, x: 129, y: 590 },
    text: "WebdriverIO?",
    // // デフォルトのコントラスト0.25では、テキストが見つかりません
    contrast: 1,
});
```

![コントラストの問題](/img/ocr/increased-contrast.jpg)

## 要素をクリックしてもモバイルデバイスのキーボードが表示されないのはなぜですか？

これは一部のテキストフィールドで、クリックが長すぎると判断され、長押しと見なされる場合に発生することがあります。[`ocrClickOnText`](./ocr-click-on-text)と[`ocrSetValue`](./ocr-set-value)の`clickDuration`オプションを使用してこれを緩和できます。[こちら](./ocr-click-on-text#options)を参照してください。

## このモジュールは通常のWebdriverIOのように複数の要素を返すことはできますか？

いいえ、現在それは不可能です。モジュールが提供されたセレクタに一致する複数の要素を見つけた場合、自動的に最も高いマッチングスコアを持つ要素を見つけます。

## このサービスが提供するOCRコマンドでアプリを完全に自動化できますか？

私はやったことがありませんが、理論的には可能なはずです。成功した場合は、ぜひお知らせください☺️。

## `{languageCode}.traineddata`という追加ファイルが表示されますが、これは何ですか？

`{languageCode}.traineddata`はTesseractが使用する言語データファイルです。選択した言語のトレーニングデータが含まれており、Tesseractが英語の文字や単語を効果的に認識するために必要な情報が含まれています。

### `{languageCode}.traineddata`の内容

このファイルには一般的に以下が含まれています：

1. **文字セットデータ：** 英語言語の文字に関する情報。
1. **言語モデル：** 文字がどのように単語を形成し、単語がどのように文を形成するかの統計モデル。
1. **特徴抽出器：** 文字認識のために画像から特徴を抽出する方法に関するデータ。
1. **トレーニングデータ：** 大量の英語テキスト画像でTesseractをトレーニングして得られたデータ。

### なぜ`{languageCode}.traineddata`が重要なのですか？

1. **言語認識：** Tesseractは特定の言語でテキストを正確に認識し処理するために、これらのトレーニングデータファイルに依存しています。`{languageCode}.traineddata`がなければ、Tesseractは英語テキストを認識できません。
1. **パフォーマンス：** OCRの品質と精度は、トレーニングデータの品質に直接関係しています。正しいトレーニングデータファイルを使用することで、OCRプロセスができるだけ正確であることを保証します。
1. **互換性：** プロジェクトに`{languageCode}.traineddata`ファイルを含めることで、異なるシステムやチームメンバーのマシン間でOCR環境を複製しやすくなります。

### `{languageCode}.traineddata`のバージョン管理

`{languageCode}.traineddata`をバージョン管理システムに含めることは以下の理由で推奨されます：

1. **一貫性：** すべてのチームメンバーまたはデプロイメント環境が同じバージョンのトレーニングデータを使用することを保証し、異なる環境間で一貫したOCR結果をもたらします。
1. **再現性：** このファイルをバージョン管理に保存することで、後日または別のマシンでOCRプロセスを実行する際に結果を再現しやすくなります。
1. **依存関係管理：** バージョン管理システムに含めることで、依存関係の管理に役立ち、セットアップや環境構成にプロジェクトを正しく実行するために必要なファイルが含まれていることを保証します。

## テストを実行せずに画面で見つかるテキストを簡単に確認する方法はありますか？

はい、CLIウィザードを使用できます。ドキュメントは[こちら](./cli-wizard)にあります。